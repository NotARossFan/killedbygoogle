#!/usr/bin/env node
const slugify = require('slugify');
const fs = require('fs');

const data = require('../graveyard.json');

slugify.extend({
  '+':'plus',
  '@':'at'
});

data.map(item => {
  item.slug = slugify(item.name, {
    lower: true
  });
  return item;
});

const items = [...new Set(data.map(item => item.slug))];

if (items.length !== data.length) throw Error('Duplicate slugs found.');

fs.writeFile('public/graveyard.json', JSON.stringify(data), (err) => {
  if (err) throw err;
  console.log('Data manipulated.');
});
